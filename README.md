# FastMediaSorter Mobile

Android app for viewing images from SMB network shares with automatic slideshow and intuitive touch controls.

## Overview

FastMediaSorter is a lightweight Android application designed for browsing and displaying photos stored on network-attached storage (NAS), Windows shares, or Samba servers. Perfect for creating digital photo frames, presentations, or quick access to network photo collections.

**Key Features:**
- üì° Direct SMB/CIFS network access (no file copying required)
- üíæ Multiple connection profiles with auto-resume
- üé¨ Configurable slideshow with countdown timer (1-300 seconds)
- üéÆ Invisible touch zones for distraction-free viewing
- üîÑ Image rotation with ABC/Random ordering
- üì¶ File sorting: Copy/Move/Delete images to 10 configurable destinations
- ‚ö° Image preloading for instant transitions (slideshow and sort)
- ‚öôÔ∏è Flexible settings: default credentials, operation permissions
- ÔøΩ Optimized for both phones and tablets

## Quick Start

1. **Connect to Network Share:**
   - Enter folder address: `192.168.1.100\Photos`
   - Provide credentials (or leave empty for guest access)
   - Set slideshow interval (5-60 seconds)

2. **Start Slideshow:**
   - Tap **Slideshow** button
   - View images in fullscreen mode

3. **Touch Controls During Slideshow:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  BACK   ‚îÇ   ABC/RND toggle  ‚îÇ ‚Üê Top 12.5%
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         ‚îÇ        ‚îÇ          ‚îÇ
‚îÇ  PREV   ‚îÇ PAUSE  ‚îÇ   NEXT   ‚îÇ ‚Üê Middle 75%
‚îÇ         ‚îÇ        ‚îÇ          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ROTATE ‚îÇ      ROTATE       ‚îÇ ‚Üê Bottom 12.5%
‚îÇ   LEFT  ‚îÇ       RIGHT       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Features

### Connection Management
- Connect to SMB servers over local network
- Save multiple SMB connection configurations
- SQLite database for persistent storage (Room v2)
- Auto-load last used connection on startup
- Anonymous and authenticated access support
- Dual purpose: Slideshow source or Sort destination

### Sort Destinations (0-9)
- Configure up to 10 sort destinations from saved connections
- Each destination has:
  - **Sort order** (0-9) - position in button list
  - **Sort name** - short display name (max 20 chars)
  - **Unique color** - 10 distinct colors for visual identification
- Automatic reordering when destinations added/removed
- Used by both Copy and Move operations in Sort screen

### Slideshow
- Automatic image slideshow with configurable interval: **1-300 seconds** (default: 10)
- **Image preloading optimization**: Background loading of next image for instant transitions
  - Preload starts when interval > 2√ó load time
  - Manual next: instant switch using preloaded image
  - Auto-advance: seamless transition with preloaded data
- Fullscreen mode with original image proportions (fitCenter)
- Supports: JPG, JPEG, PNG, GIF, BMP, WebP
- Orientation support (portrait and landscape)
- State preservation on screen rotation

### Touch Controls (Invisible Zones)
- **Top 12.5% of screen** (divided into 2 equal horizontal zones):
  - **Left half** - Back to connection selection
  - **Right half** - Toggle ABC ‚áÑ Random order
- **Middle 75% of screen** (divided into 3 equal horizontal zones):
  - **Left third** - Previous image (auto-pause enabled)
  - **Center third** - Pause/Resume slideshow
  - **Right third** - Next image (timer reset)
- **Bottom 12.5% of screen** (divided into 2 equal horizontal zones):
  - **Left half** - Rotate image 90¬∞ counter-clockwise
  - **Right half** - Rotate image 90¬∞ clockwise
  - Rotation persists for all subsequent images until changed

### Slideshow Features
- Configurable interval: **1-300 seconds** (default: 10)
- Countdown timer: shows "in 3/2/1" for last 3 seconds
- Shows interval number on resume for 1 second
- Auto-pause on: rotation, previous image, manual back
- Timer reset on: next image click
- ABC ordering: alphabetically by filename
- Random ordering: shuffled on toggle, remembers mode between sessions
- Session auto-resume: starts from last viewed image on app relaunch
- **Performance**: Preloads next image in background for smooth transitions

### UI Features
- Material Design 3 with adaptive icons
- Compact layout without ActionBar (maximized space)
- Icon-based buttons (Settings ‚öôÔ∏è, Save üíæ)
- RecyclerView with up to 5 visible connections (scrollable)
- Touch zone visualization in Settings screen
- Fullscreen slideshow without visible controls
- Vertical scroll support for landscape orientation

## Requirements

- Android 9.0 (API 28) or higher
- Local network access
- SMB server with shared folder containing images

## Build APK

```bash
./gradlew assembleDebug
```

APK file: `app/build/outputs/apk/debug/fastmediasorter.apk`

For release build:
```bash
./gradlew assembleRelease
```

APK file: `app/build/outputs/apk/release/fastmediasorter.apk`

## Setup

1. Enter folder address (combined format): `192.168.1.100\Photos\Vacation`
2. Provide username and password (leave empty for anonymous/guest access)
3. Enter connection name (optional - auto-generated from address if empty)
4. Set slide interval in seconds (5-60, default: 10)
5. Click **üíæ Save** to store connection for future use
6. Click **Slideshow** to start viewing

## Usage

### Main Screen
- **Sort** button - Open file sorting mode for selected connection
- **‚öôÔ∏è Settings** - Configure slideshow help and sort destinations
- **Slideshow** - Start slideshow with current settings
- **Interval** - Set seconds between images
- Tap saved connection to load its settings
- Delete connection by clicking trash icon (üóëÔ∏è)

### Slideshow Screen
- Touch zones control everything (see diagram in Settings)
- Tap **right zone** - next image + timer reset (doesn't resume if paused)
- Tap **center zone** - pause/resume (shows interval on resume)
- Tap **left zone** - previous image + auto-pause
- Top right zone - toggle between ABC (alphabetic) and RND (random) order
- Bottom zones - rotate current image ¬±90¬∞
- Device rotation preserved - slideshow continues

### Settings Screen
- **Slideshow tab** - Visual guide showing all touch control zones with color-coded areas
- **Sort to.. tab** - Configure up to 10 sort destinations (0-9)
  - Add destination: Select connection + enter short name (max 20 chars)
  - Reorder destinations: Move Up/Down buttons
  - Delete destination: Remove from list
  - Each destination gets unique color for easy identification
- **Settings tab** - Application-wide settings:
  - **Default Username/Password** - Auto-filled for connections without credentials
  - **Sorting Settings**:
    - **Allow to Copy** - Enable/disable Copy buttons (default: ON)
    - **Allow to Move** - Enable/disable Move buttons (default: OFF)
    - **Allow to Delete** - Enable/disable Delete button (default: OFF)
    - **Request user for deletion** - Confirmation dialog before delete (default: ON)
- Contact information: sza@ukr.net 2025

### Sort Screen
- **Navigation**: Left/right touch zones (50/50 split) with infinite cycling
- **Image preloading**: Background loading of next image for instant navigation
- **File info**: Displays filename, size (KB), and modification date
- **Connection name**: Shows current connection at top of screen
- **Copy to..**: Up to 10 colored buttons for copying current image to destinations
  - Visible only if "Allow to Copy" enabled in Settings
  - File remains in source folder
  - Auto-advance to next image on success
  - Error handling: Already exists, same folder, network/security errors
- **Move to..**: Up to 10 colored buttons for moving current image to destinations
  - Visible only if "Allow to Move" enabled in Settings
  - File deleted from source after successful copy
  - Removed from current list, auto-load next image
  - Error handling: Copy errors + delete permission errors
- **Delete**: Red button for deleting current image
  - Visible only if "Allow to Delete" enabled in Settings
  - Optional confirmation dialog ("Request user for deletion" setting)
  - File permanently deleted from source
  - Removed from list, auto-load next image
- **Progress indicator**: "Copying..." / "Moving..." / "Deleting..." overlay during operations
- **Counter**: Shows current position (e.g., "5 / 23")
- **Back button**: Return to main screen

## Technical Details

- **Language**: Kotlin 1.9.10
- **Target SDK**: Android 14 (API 34)
- **Minimum SDK**: Android 9 (API 28)
- **Build System**: Gradle 8.13 with KSP
- **Database**: Room 2.6.1 (SQLite, version 2 with sort fields)
- **SMB Library**: jCIFS-ng 2.1.10 (SMB 2/3 support)
- **Image Loading**: Glide 4.16.0
- **UI**: Material Design 3, ConstraintLayout, RecyclerView, TabLayout, ViewPager2
- **Async**: Kotlin Coroutines 1.7.3 with lifecycle-aware scopes
- **Architecture**: MVVM with Repository pattern, LiveData/Flow reactivity

## Project Structure

```
app/src/main/java/com/sza/fastmediasorter/
‚îú‚îÄ‚îÄ MainActivity.kt - connection management, compact UI
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ ConnectionConfig.kt - Room entity v2 (sortOrder, sortName fields)
‚îÇ   ‚îú‚îÄ‚îÄ ConnectionConfigDao.kt - database DAO with Flow, sort queries
‚îÇ   ‚îú‚îÄ‚îÄ AppDatabase.kt - Room database v2 with migration
‚îÇ   ‚îî‚îÄ‚îÄ ConnectionRepository.kt - CRUD + sort destination management
‚îú‚îÄ‚îÄ network/
‚îÇ   ‚îú‚îÄ‚îÄ SmbClient.kt - jCIFS-ng wrapper with copy/move/delete operations
‚îÇ   ‚îî‚îÄ‚îÄ ImageRepository.kt - image loading with default credentials fallback
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ ConnectionViewModel.kt - MVVM for connections & destinations
‚îÇ   ‚îú‚îÄ‚îÄ ConnectionAdapter.kt - RecyclerView adapter for connections
‚îÇ   ‚îú‚îÄ‚îÄ slideshow/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SlideshowActivity.kt - fullscreen with touch zones & preloading
‚îÇ   ‚îú‚îÄ‚îÄ settings/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsActivity.kt - TabLayout with 3 tabs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SlideshowHelpFragment.kt - touch zones diagram
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SortHelpFragment.kt - sort destinations management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsFragment.kt - app settings (credentials, permissions)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SortDestinationAdapter.kt - RecyclerView for destinations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AddSortDestinationDialog.kt - add destination dialog
‚îÇ   ‚îî‚îÄ‚îÄ sort/
‚îÇ       ‚îî‚îÄ‚îÄ SortActivity.kt - image sorting with copy/move/delete & preloading
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ PreferenceManager.kt - SharedPreferences wrapper (credentials, permissions)

res/
‚îú‚îÄ‚îÄ drawable/
‚îÇ   ‚îú‚îÄ‚îÄ ic_settings.xml - gear icon
‚îÇ   ‚îú‚îÄ‚îÄ ic_save.xml - save icon
‚îÇ   ‚îú‚îÄ‚îÄ ic_back.xml - back arrow
‚îÇ   ‚îî‚îÄ‚îÄ touch_zones_scheme.xml - control zones diagram with labels
‚îî‚îÄ‚îÄ layout/
    ‚îú‚îÄ‚îÄ activity_main.xml - compact 4-button layout
    ‚îú‚îÄ‚îÄ activity_slideshow.xml - invisible touch zones
    ‚îú‚îÄ‚îÄ activity_settings.xml - TabLayout + ViewPager2 (3 tabs)
    ‚îú‚îÄ‚îÄ activity_sort.xml - fullscreen with Copy/Move/Delete buttons
    ‚îú‚îÄ‚îÄ fragment_slideshow_help.xml - touch zones visualization
    ‚îú‚îÄ‚îÄ fragment_sort_help.xml - destinations list with add button
    ‚îú‚îÄ‚îÄ fragment_settings.xml - credentials + sorting permissions
    ‚îú‚îÄ‚îÄ item_connection.xml - connection list item
    ‚îú‚îÄ‚îÄ item_sort_destination.xml - destination with up/down/delete
    ‚îî‚îÄ‚îÄ dialog_add_sort_destination.xml - add destination dialog
```

## Screenshots & Assets

- `store_assets/screenshots/` - Google Play screenshots
- `store_assets/feature_graphic/fms.png` - 1024x500 banner
- `store_assets/touch_zones_guide.svg` - full color touch zones diagram
- `PRIVACY_POLICY.md` - privacy policy for Google Play

## Release Build

Configured for Google Play Store publication:
- Keystore signing (fastmediasorter.keystore)
- ProGuard/R8 code shrinking and obfuscation
- Release APK/AAB output name: `fastmediasorter.apk`

```bash
./gradlew bundleRelease
```

Output: `app/build/outputs/bundle/release/app-release.aab`

## Privacy

- **No data collection**: All settings stored locally on device
- **No internet access**: Only local network (SMB) access
- **No analytics or tracking**
- Full privacy policy: [PRIVACY_POLICY.md](PRIVACY_POLICY.md)

## License

MIT License

## Contact

sza@ukr.net - 2025